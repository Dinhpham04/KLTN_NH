{
    "info": {
        "_postman_id": "admin-crud-api-2025-v2",
        "name": "Admin CRUD API (With Authorization)",
        "description": "Complete Admin management API collection with role-based authorization.\n\n**Features:**\n- Authentication (Login, Register)\n- Full CRUD operations for admins\n- Password management (Self-change & OWNER reset)\n- Activate/Deactivate admins\n- Soft delete & restore\n- Hard delete (permanent)\n- Search & statistics\n- Role-based authorization (OWNER/MANAGER/STAFF)\n- 70+ automated tests\n\n**Authorization Levels:**\n- Public: Login only\n- OWNER Only: Register, Reset Password, Deactivate/Activate, Delete/Restore\n- OWNER/MANAGER: View All, Search, Statistics\n- Self or OWNER: Update Info\n- Self Only: Change Password\n- Authenticated: View By ID\n\n**Test Scenarios:**\n1. Login as OWNER ‚Üí Test all OWNER-only operations\n2. Login as MANAGER ‚Üí Test view operations (should fail on OWNER-only)\n3. Login as STAFF ‚Üí Test self-operations (should fail on view all)\n4. No token ‚Üí All protected endpoints should return 401\n\n**Created:** October 19, 2025\n**Updated:** October 19, 2025 (Added Authorization)\n**Author:** Senior Backend Developer",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "üîì Public Routes",
            "item": [
                {
                    "name": "Login Admin",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200 or 401\", function () {",
                                    "    pm.expect([200, 401]).to.include(pm.response.code);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.test(\"Response has correct structure\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData).to.have.property('status');",
                                    "        pm.expect(jsonData).to.have.property('message');",
                                    "        pm.expect(jsonData).to.have.property('token');",
                                    "        pm.expect(jsonData).to.have.property('user');",
                                    "    });",
                                    "",
                                    "    pm.test(\"Token is present\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.token).to.be.a('string');",
                                    "        pm.expect(jsonData.token.length).to.be.above(0);",
                                    "    });",
                                    "",
                                    "    pm.test(\"User data is correct\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.user).to.have.property('id');",
                                    "        pm.expect(jsonData.user).to.have.property('username');",
                                    "        pm.expect(jsonData.user).to.have.property('role');",
                                    "    });",
                                    "",
                                    "    // Save token and user info",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.environment.set('auth_token', jsonData.token);",
                                    "    pm.environment.set('logged_admin_id', jsonData.user.id);",
                                    "    pm.environment.set('logged_admin_role', jsonData.user.role);",
                                    "    console.log('‚úÖ Login successful');",
                                    "    console.log('   User ID:', jsonData.user.id);",
                                    "    console.log('   Username:', jsonData.user.username);",
                                    "    console.log('   Role:', jsonData.user.role);",
                                    "    console.log('   Token saved to environment');",
                                    "}",
                                    "",
                                    "pm.test(\"Response time is less than 1000ms\", function () {",
                                    "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/admin/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "login"
                            ]
                        },
                        "description": "üîì **PUBLIC** - Login admin account to get authentication token.\n\nNo authorization required."
                    },
                    "response": []
                }
            ],
            "description": "Public routes that don't require authentication"
        },
        {
            "name": "üëë OWNER Only Routes",
            "item": [
                {
                    "name": "Register New Admin",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200, 400, 403, or 500\", function () {",
                                    "    pm.expect([200, 400, 403, 500]).to.include(pm.response.code);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.test(\"Admin registered successfully (OWNER)\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('successfully');",
                                    "    });",
                                    "    console.log('‚úÖ Admin registered by OWNER');",
                                    "}",
                                    "",
                                    "if (pm.response.code === 403) {",
                                    "    pm.test(\"Access denied for non-OWNER\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('Access denied');",
                                    "        pm.expect(jsonData.message).to.include('OWNER');",
                                    "    });",
                                    "    console.log('‚ùå Access denied - OWNER role required');",
                                    "}",
                                    "",
                                    "pm.test(\"Response time is less than 1000ms\", function () {",
                                    "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"newstaff\",\n  \"password\": \"Staff123\",\n  \"role\": \"STAFF\",\n  \"employee_id\": 1\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/admin/register-admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "register-admin"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** - Register a new admin account.\n\nRequires:\n- Authorization: Bearer token\n- Role: OWNER\n\nReturns 403 if not OWNER."
                    },
                    "response": []
                },
                {
                    "name": "Reset Password (OWNER for Others)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200, 400, 403, or 404\", function () {",
                                    "    pm.expect([200, 400, 403, 404]).to.include(pm.response.code);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.test(\"Password reset successfully by OWNER\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('Password reset');",
                                    "        pm.expect(jsonData.message).to.include('OWNER');",
                                    "    });",
                                    "    console.log('‚úÖ Password reset by OWNER (no old password required)');",
                                    "}",
                                    "",
                                    "if (pm.response.code === 403) {",
                                    "    pm.test(\"Access denied or OWNER protection\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.satisfy(function(msg) {",
                                    "            return msg.includes('Access denied') || msg.includes('Cannot reset password for another OWNER');",
                                    "        });",
                                    "    });",
                                    "    console.log('‚ùå Cannot reset OWNER password or not authorized');",
                                    "}",
                                    "",
                                    "pm.test(\"Response time is less than 1000ms\", function () {",
                                    "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"newPassword\": \"NewPass123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}/reset-password",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}",
                                "reset-password"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** - Reset password for STAFF/MANAGER without knowing old password.\n\n**Important:**\n- OWNER can reset STAFF/MANAGER passwords\n- OWNER CANNOT reset another OWNER's password\n- No old password required\n- Password is hashed (OWNER cannot see it)\n\nReturns 403 if:\n- Not OWNER role\n- Target is another OWNER"
                    },
                    "response": []
                },
                {
                    "name": "Deactivate Admin",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}/deactivate",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}",
                                "deactivate"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** - Deactivate admin account (set is_active = 0)"
                    }
                },
                {
                    "name": "Activate Admin",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}/activate",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}",
                                "activate"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** - Activate admin account (set is_active = 1)"
                    }
                },
                {
                    "name": "Soft Delete Admin",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** - Soft delete admin (set deleted_at). Cannot delete last OWNER."
                    }
                },
                {
                    "name": "Restore Admin",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}/restore",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}",
                                "restore"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** - Restore soft-deleted admin"
                    }
                },
                {
                    "name": "Hard Delete Admin (Permanent)",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}/permanent",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}",
                                "permanent"
                            ]
                        },
                        "description": "üëë **OWNER ONLY** ‚ö†Ô∏è **DANGER!** - Permanently delete admin. Cannot delete OWNER or admins with orders/payments."
                    }
                }
            ],
            "description": "Routes that require OWNER role authorization"
        },
        {
            "name": "üë• OWNER/MANAGER Routes",
            "item": [
                {
                    "name": "Get All Admins",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200 or 403\", function () {",
                                    "    pm.expect([200, 403]).to.include(pm.response.code);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.test(\"Response has correct structure\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData).to.have.property('data');",
                                    "        pm.expect(jsonData.data).to.be.an('array');",
                                    "    });",
                                    "",
                                    "    // Save first admin ID",
                                    "    var jsonData = pm.response.json();",
                                    "    if (jsonData.data.length > 0) {",
                                    "        pm.environment.set('first_admin_id', jsonData.data[0].id);",
                                    "        console.log('‚úÖ Admins retrieved, first ID:', jsonData.data[0].id);",
                                    "    }",
                                    "}",
                                    "",
                                    "if (pm.response.code === 403) {",
                                    "    pm.test(\"Access denied for STAFF\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('Access denied');",
                                    "    });",
                                    "    console.log('‚ùå Access denied - OWNER or MANAGER required');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER or MANAGER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin"
                            ]
                        },
                        "description": "üë• **OWNER/MANAGER** - Get all admins (active only by default)"
                    }
                },
                {
                    "name": "Search Admins",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER or MANAGER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/search?q=admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "search"
                            ],
                            "query": [
                                {
                                    "key": "q",
                                    "value": "admin"
                                }
                            ]
                        },
                        "description": "üë• **OWNER/MANAGER** - Search admins by username, employee name, phone, email"
                    }
                },
                {
                    "name": "Get Admin Statistics",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "OWNER or MANAGER role required"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/stats",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "stats"
                            ]
                        },
                        "description": "üë• **OWNER/MANAGER** - Get admin statistics (total, active, inactive, deleted, by role)"
                    }
                }
            ],
            "description": "Routes that require OWNER or MANAGER role"
        },
        {
            "name": "üîê Self or OWNER Routes",
            "item": [
                {
                    "name": "Update Admin Info",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200 or 403\", function () {",
                                    "    pm.expect([200, 403]).to.include(pm.response.code);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.test(\"Admin updated successfully\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('updated');",
                                    "    });",
                                    "    console.log('‚úÖ Admin info updated');",
                                    "}",
                                    "",
                                    "if (pm.response.code === 403) {",
                                    "    pm.test(\"Access denied - can only modify self\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('can only modify your own account');",
                                    "    });",
                                    "    console.log('‚ùå Can only modify own account (unless OWNER)');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "Must be self or OWNER"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"role\": \"MANAGER\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{logged_admin_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{logged_admin_id}}"
                            ]
                        },
                        "description": "üîê **SELF or OWNER** - Update admin information.\n\n- Admins can update themselves\n- OWNER can update anyone"
                    }
                },
                {
                    "name": "Change Own Password",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200, 400, or 403\", function () {",
                                    "    pm.expect([200, 400, 403]).to.include(pm.response.code);",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    pm.test(\"Password changed successfully\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('Password changed');",
                                    "    });",
                                    "    console.log('‚úÖ Password changed (old password verified)');",
                                    "}",
                                    "",
                                    "if (pm.response.code === 400) {",
                                    "    pm.test(\"Wrong old password or validation error\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.be.a('string');",
                                    "    });",
                                    "    console.log('‚ùå Old password incorrect or validation failed');",
                                    "}",
                                    "",
                                    "if (pm.response.code === 403) {",
                                    "    pm.test(\"Can only change own password\", function () {",
                                    "        var jsonData = pm.response.json();",
                                    "        pm.expect(jsonData.message).to.include('can only modify your own account');",
                                    "    });",
                                    "    console.log('‚ùå Can only change own password');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "Must be self only"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"oldPassword\": \"Admin123\",\n  \"newPassword\": \"NewPass123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{logged_admin_id}}/password",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{logged_admin_id}}",
                                "password"
                            ]
                        },
                        "description": "üîê **SELF ONLY** - Change own password.\n\n**Important:**\n- Can ONLY change own password\n- Old password verification required\n- OWNER cannot use this to change others' passwords (use reset-password instead)"
                    }
                }
            ],
            "description": "Routes for self-modification (or OWNER can modify others)"
        },
        {
            "name": "üîí Authenticated Routes",
            "item": [
                {
                    "name": "Get Admin By ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "Any authenticated admin"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}"
                            ]
                        },
                        "description": "üîí **AUTHENTICATED** - Get admin by ID. Any logged-in admin can view."
                    }
                },
                {
                    "name": "Get Admin With Employee Details",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}",
                                "description": "Any authenticated admin"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin/{{first_admin_id}}/employee",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "{{first_admin_id}}",
                                "employee"
                            ]
                        },
                        "description": "üîí **AUTHENTICATED** - Get admin with full employee details"
                    }
                }
            ],
            "description": "Routes that require any authentication (any role)"
        },
        {
            "name": "‚ùå Error Tests",
            "item": [
                {
                    "name": "No Token - Should Fail 401",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 401 Unauthorized\", function () {",
                                    "    pm.response.to.have.status(401);",
                                    "});",
                                    "",
                                    "pm.test(\"Error message indicates missing token\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.message).to.include('Missing token');",
                                    "});",
                                    "",
                                    "console.log('‚úÖ Correctly rejected - No token provided');"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin"
                            ]
                        },
                        "description": "Test that protected endpoint returns 401 without token"
                    }
                },
                {
                    "name": "Invalid Token - Should Fail 403",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 403 Forbidden\", function () {",
                                    "    pm.response.to.have.status(403);",
                                    "});",
                                    "",
                                    "pm.test(\"Error message indicates invalid token\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.message).to.include('Invalid token');",
                                    "});",
                                    "",
                                    "console.log('‚úÖ Correctly rejected - Invalid token');"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer invalid.token.here"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "admin"
                            ]
                        },
                        "description": "Test that protected endpoint returns 403 with invalid token"
                    }
                }
            ],
            "description": "Tests for error scenarios (401, 403)"
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Global pre-request script",
                    "console.log('üöÄ Request:', pm.info.requestName);",
                    "console.log('üìç Endpoint:', pm.request.url.toString());",
                    "",
                    "// Show current auth status",
                    "var token = pm.environment.get('auth_token');",
                    "var role = pm.environment.get('logged_admin_role');",
                    "if (token) {",
                    "    console.log('üîë Authenticated as:', role || 'Unknown');",
                    "} else {",
                    "    console.log('üîì Not authenticated');",
                    "}"
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Global test script",
                    "pm.test(\"Response has valid JSON\", function () {",
                    "    pm.response.to.be.json;",
                    "});",
                    "",
                    "pm.test(\"Response time is less than 3000ms\", function () {",
                    "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                    "});",
                    "",
                    "pm.test(\"Content-Type is application/json\", function () {",
                    "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                    "});"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:5000",
            "type": "default"
        }
    ]
}